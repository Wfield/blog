## Rust

- println!：宏与函数
- `'' `  与`""`
- 函数：fn
- main：特殊，入口

- 编译：rustc 编译出直接可以运行的文件



### cargo

- cargo new 
- cargo build -------> target
- cargo run
- cargo check



### 语法

- 创建变量：let

- 将变量标注为可变的：mut

- `::` 语法表明 `new` 是 `String` 类型的一个 **关联函数**，语法用于关联函数和模块创建的命名空间

  ```rust
  // 创建了一个可变变量，当前它绑定到一个新的 String 空实例上
  let mut guess = String::new();
  ```

- read_line: 是接收用户在标准输入中输入的任何内容，并将其**追加**到一个字符串中

- Expect: 如果 `io::Result` 实例的值是 `Err`，`expect` 会导致**程序崩溃**

- Match: 表达式, 由分支构成

- `u32` 是一个无符号的 32 位整型

- Const: 常量只能被设置为常量表达式，而不可以是其他任何只能在运行时计算出的值

- 标量：整数，浮点数，布尔值，字符（char）（单引号，字符串双引号）

-  Rust 中的数组是固定长度的：一旦声明，它们的长度不能增长或缩小

- **语句**（*Statements*）是执行一些操作但不返回值的指令。表达式（*Expressions*）计算并产生一个值

- 函数定义是语句；函数调用是表达式

- 如果在表达式的结尾加上分号，它就变成了语句，而语句不会返回值



### String

字符串字面值 `let s = "hello";`  **这个字符串值是硬编码进程序代码中的**

字符串类型 `String` : `let s = String::from("hello");`    这个类型管理被分配到堆上的数据，所以能够存储在编译时未知大小的文本

#### String 和 str：

​	Rust 的核心语言中只有一种字符串类型：`str`，字符串 slice，它通常以被借用的形式出现，`&str`

​	称作 `String` 的类型是由标准库提供的，而没有写进核心语言部分，它是可增长的、可变的、有所有权的、UTF-8 编码的字符串类型





### 所有权

变量的所有权总是遵循相同的模式：将值赋给另一个变量时移动它

引用：函数使用一个值但不获取所有权

我们将创建一个引用的行为称为 **借用**



可变量：`let mut s = String::from("hello");`

可变引用：`&mut s;` 读写可变变量

不可变引用：`&s`   读取变量



一个引用的作用域从声明的地方开始一直持续到最后一次使用为止



### 结构体

- 实例：没有 new
- impl



### 枚举 & 元组

- 枚举是单独一个类型





### crate

- 库 crate：*src/lib.rs*   注意文件名为 lib
- 二进制 crate：*src/main.rs*   注意文件名为 main
- `src/main.rs` 和 `src/lib.rs` 叫做 crate 根



### 包 package

一个包中至多 **只能** 包含一个库 crate(library crate)；包中可以包含任意多个二进制 crate(binary crate)；包中至少包含一个 crate，无论是库的还是二进制的



### 模块

- *模块* 让我们可以将一个 crate 中的代码进行分组，以提高可读性与重用性





### 集合

不同于内建的数组和元组类型，这些集合指向的数据是储存在堆上的，这意味着数据的数量不必在编译时就已知，并且还可以随着程序的运行增长或缩小





### 引用

- `* ` 通过引用得到值





### unwrap

如果 `Result` 值是成员 `Ok`，`unwrap` 会返回 `Ok` 中的值。如果 `Result` 是成员 `Err`，`unwrap` 会为我们调用 `panic!`



### panic!

运行时无法预测的 bug；在当有可能会导致有害状态的情况下建议使用，有害状态是指当一些假设、保证、协议或不可变性被打破的状态，例如无效的值、自相矛盾的值或者被传递了不存在的值 

`panic!` 的调用更趋向于程序上的问题而不是使用上的问题



### main 的返回值

`main` 函数的返回值：`()`

```
main` 函数的一个有效的返回值是 `()`，同时出于方便，另一个有效的返回值是 `Result<T, E>
```





### slice





### trait

trait 定义是一种将方法签名组合起来的方法，目的是定义一个实现某些目的所必需的行为的集合

trait 可以与泛型结合来将泛型限制为拥有特定行为的类型，而不是任意类型







### 生命周期

生命周期则有助于确保引用在我们需要他们的时候一直有效

Rust 中的每一个引用都有其 **生命周期**（*lifetime*），也就是引用保持有效的作用域

生命周期针对的是引用，生命周期注解的作用是告诉函数 参数与返回值 之间的生命周期的关系





### 类型转换

什么样的值在 if 条件中为 true？





### Option

包含 None 值

Some





### Result

Ok 或者 Err





### 闭包

- 内联匿名函数
- 可以捕获其环境并访问其被定义的作用域的变量
- 闭包对周围作用域变量的使用方式：
  - FnOnce: 消费从周围作用域捕获的变量，闭包获取了变量的所有权
  - FnMut：可变借用
  - Fn：不可变借用



### unwrap_or_else

